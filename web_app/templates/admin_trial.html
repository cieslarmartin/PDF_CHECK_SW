{% extends "admin_base.html" %}
{% block title %}PDF DokuCheck Admin – Trial správa{% endblock %}
{% block content %}
<h2 style="font-size:1.2em;font-weight:600;margin-bottom:8px;">Trial správa (Machine-ID)</h2>
<p class="text-muted small mb-3">Zkušební režim je vázaný na zařízení (X-Machine-ID). Celkový limit souborů na jedno zařízení: 10. Tlačítko „Reset Trial“ vynuluje počítadlo a umožní znovu vyzkoušet.</p>
<div class="table-container">
    <table class="table-dense">
        <thead>
            <tr>
                <th>Machine-ID</th>
                <th>Celkem zkontrolovaných souborů</th>
                <th>Poslední aktivita</th>
                <th>Akce</th>
            </tr>
        </thead>
        <tbody>
            {% for row in trial_list %}
            <tr>
                <td style="font-family:monospace;font-size:0.8em;max-width:280px;overflow:hidden;text-overflow:ellipsis;" title="{{ row.machine_id }}">{{ row.machine_id }}</td>
                <td>{{ row.total_files }}</td>
                <td>{{ row.last_seen or '—' }}</td>
                <td>
                    <form action="{{ url_for('admin.api_trial_reset') }}" method="post" style="display:inline;" onsubmit="return confirm('Vynulovat Trial pro toto zařízení?');">
                        <input type="hidden" name="machine_id" value="{{ row.machine_id }}">
                        <button type="submit" class="action-btn" style="background:#fef3c7;border-color:#f59e0b;">Resetovat Trial</button>
                    </form>
                </td>
            </tr>
            {% else %}
            <tr><td colspan="4" class="text-center text-muted" style="padding:24px;">Žádná Trial aktivita</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
